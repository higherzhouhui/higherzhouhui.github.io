function S(t){return t.split("-")[0]}function k(t){return t.split("-")[1]}function B(t){return["top","bottom"].includes(S(t))?"x":"y"}function G(t){return t==="y"?"height":"width"}function Y(t,n,e){let{reference:o,floating:i}=t;const u=o.x+o.width/2-i.width/2,c=o.y+o.height/2-i.height/2,r=B(n),s=G(r),l=o[s]/2-i[s]/2,d=S(n),f=r==="x";let a;switch(d){case"top":a={x:u,y:o.y-i.height};break;case"bottom":a={x:u,y:o.y+o.height};break;case"right":a={x:o.x+o.width,y:c};break;case"left":a={x:o.x-i.width,y:c};break;default:a={x:o.x,y:o.y}}switch(k(n)){case"start":a[r]-=l*(e&&f?-1:1);break;case"end":a[r]+=l*(e&&f?-1:1);break}return a}const rt=async(t,n,e)=>{const{placement:o="bottom",strategy:i="absolute",middleware:u=[],platform:c}=e,r=await(c.isRTL==null?void 0:c.isRTL(n));let s=await c.getElementRects({reference:t,floating:n,strategy:i}),{x:l,y:d}=Y(s,o,r),f=o,a={},h=0;for(let g=0;g<u.length;g++){const{name:x,fn:E}=u[g],{x:V,y:D,data:C,reset:p}=await E({x:l,y:d,initialPlacement:o,placement:f,strategy:i,middlewareData:a,rects:s,platform:c,elements:{reference:t,floating:n}});if(l=V!=null?V:l,d=D!=null?D:d,a={...a,[x]:{...a[x],...C}},p&&h<=50){h++,typeof p=="object"&&(p.placement&&(f=p.placement),p.rects&&(s=p.rects===!0?await c.getElementRects({reference:t,floating:n,strategy:i}):p.rects),{x:l,y:d}=Y(s,f,r)),g=-1;continue}}return{x:l,y:d,placement:f,strategy:i,middlewareData:a}};function st(t){return{top:0,right:0,bottom:0,left:0,...t}}function ct(t){return typeof t!="number"?st(t):{top:t,right:t,bottom:t,left:t}}function F(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const lt=Math.min,ft=Math.max;function ut(t,n,e){return ft(t,lt(n,e))}const Nt=t=>({name:"arrow",options:t,async fn(n){const{element:e,padding:o=0}=t!=null?t:{},{x:i,y:u,placement:c,rects:r,platform:s}=n;if(e==null)return{};const l=ct(o),d={x:i,y:u},f=B(c),a=k(c),h=G(f),g=await s.getDimensions(e),x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",V=r.reference[h]+r.reference[f]-d[f]-r.floating[h],D=d[f]-r.reference[f],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(e));let p=C?f==="y"?C.clientHeight||0:C.clientWidth||0:0;p===0&&(p=r.floating[h]);const ot=V/2-D/2,H=l[x],j=p-g[h]-l[E],T=p/2-g[h]/2+ot,$=ut(H,T,j),it=(a==="start"?l[x]:l[E])>0&&T!==$&&r.reference[h]<=r.floating[h]?T<H?H-T:j-T:0;return{[f]:d[f]-it,data:{[f]:$,centerOffset:T-$}}}});async function at(t,n){const{placement:e,platform:o,elements:i}=t,u=await(o.isRTL==null?void 0:o.isRTL(i.floating)),c=S(e),r=k(e),s=B(e)==="x",l=["left","top"].includes(c)?-1:1,d=u&&s?-1:1,f=typeof n=="function"?n(t):n;let{mainAxis:a,crossAxis:h,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return r&&typeof g=="number"&&(h=r==="end"?g*-1:g),s?{x:h*d,y:a*l}:{x:a*l,y:h*d}}const Et=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:o}=n,i=await at(n,t);return{x:e+i.x,y:o+i.y,data:i}}}};function J(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function m(t){if(t==null)return window;if(!J(t)){const n=t.ownerDocument;return n&&n.defaultView||window}return t}function y(t){return m(t).getComputedStyle(t)}function b(t){return J(t)?"":t?(t.nodeName||"").toLowerCase():""}function K(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(n=>n.brand+"/"+n.version).join(" "):navigator.userAgent}function w(t){return t instanceof m(t).HTMLElement}function A(t){return t instanceof m(t).Element}function dt(t){return t instanceof m(t).Node}function O(t){if(typeof ShadowRoot=="undefined")return!1;const n=m(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function N(t){const{overflow:n,overflowX:e,overflowY:o,display:i}=y(t);return/auto|scroll|overlay|hidden/.test(n+o+e)&&!["inline","contents"].includes(i)}function ht(t){return["table","td","th"].includes(b(t))}function Q(t){const n=/firefox/i.test(K()),e=y(t);return e.transform!=="none"||e.perspective!=="none"||n&&e.willChange==="filter"||n&&(e.filter?e.filter!=="none":!1)||["transform","perspective"].some(o=>e.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const i=e.contain;return i!=null?i.includes(o):!1})}function Z(){return!/^((?!chrome|android).)*safari/i.test(K())}function X(t){return["html","body","#document"].includes(b(t))}const I=Math.min,L=Math.max,P=Math.round;function R(t,n,e){var o,i,u,c;n===void 0&&(n=!1),e===void 0&&(e=!1);const r=t.getBoundingClientRect();let s=1,l=1;n&&w(t)&&(s=t.offsetWidth>0&&P(r.width)/t.offsetWidth||1,l=t.offsetHeight>0&&P(r.height)/t.offsetHeight||1);const d=A(t)?m(t):window,f=!Z()&&e,a=(r.left+(f&&(o=(i=d.visualViewport)==null?void 0:i.offsetLeft)!=null?o:0))/s,h=(r.top+(f&&(u=(c=d.visualViewport)==null?void 0:c.offsetTop)!=null?u:0))/l,g=r.width/s,x=r.height/l;return{width:g,height:x,top:h,right:a+g,bottom:h+x,left:a,x:a,y:h}}function v(t){return((dt(t)?t.ownerDocument:t.document)||window.document).documentElement}function W(t){return A(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tt(t){return R(v(t)).left+W(t).scrollLeft}function gt(t){const n=R(t);return P(n.width)!==t.offsetWidth||P(n.height)!==t.offsetHeight}function pt(t,n,e){const o=w(n),i=v(n),u=R(t,o&&gt(n),e==="fixed");let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(o||!o&&e!=="fixed")if((b(n)!=="body"||N(i))&&(c=W(n)),w(n)){const s=R(n,!0);r.x=s.x+n.clientLeft,r.y=s.y+n.clientTop}else i&&(r.x=tt(i));return{x:u.left+c.scrollLeft-r.x,y:u.top+c.scrollTop-r.y,width:u.width,height:u.height}}function _(t){return b(t)==="html"?t:t.assignedSlot||t.parentNode||(O(t)?t.host:null)||v(t)}function z(t){return!w(t)||y(t).position==="fixed"?null:t.offsetParent}function wt(t){let n=_(t);for(O(n)&&(n=n.host);w(n)&&!X(n);){if(Q(n))return n;{const e=n.parentNode;n=O(e)?e.host:e}}return null}function M(t){const n=m(t);let e=z(t);for(;e&&ht(e)&&y(e).position==="static";)e=z(e);return e&&(b(e)==="html"||b(e)==="body"&&y(e).position==="static"&&!Q(e))?n:e||wt(t)||n}function U(t){if(w(t))return{width:t.offsetWidth,height:t.offsetHeight};const n=R(t);return{width:n.width,height:n.height}}function mt(t){let{rect:n,offsetParent:e,strategy:o}=t;const i=w(e),u=v(e);if(e===u)return n;let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if((i||!i&&o!=="fixed")&&((b(e)!=="body"||N(u))&&(c=W(e)),w(e))){const s=R(e,!0);r.x=s.x+e.clientLeft,r.y=s.y+e.clientTop}return{...n,x:n.x-c.scrollLeft+r.x,y:n.y-c.scrollTop+r.y}}function xt(t,n){const e=m(t),o=v(t),i=e.visualViewport;let u=o.clientWidth,c=o.clientHeight,r=0,s=0;if(i){u=i.width,c=i.height;const l=Z();(l||!l&&n==="fixed")&&(r=i.offsetLeft,s=i.offsetTop)}return{width:u,height:c,x:r,y:s}}function yt(t){var n;const e=v(t),o=W(t),i=(n=t.ownerDocument)==null?void 0:n.body,u=L(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=L(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let r=-o.scrollLeft+tt(t);const s=-o.scrollTop;return y(i||e).direction==="rtl"&&(r+=L(e.clientWidth,i?i.clientWidth:0)-u),{width:u,height:c,x:r,y:s}}function nt(t){const n=_(t);return X(n)?t.ownerDocument.body:w(n)&&N(n)?n:nt(n)}function et(t,n){var e;n===void 0&&(n=[]);const o=nt(t),i=o===((e=t.ownerDocument)==null?void 0:e.body),u=m(o),c=i?[u].concat(u.visualViewport||[],N(o)?o:[]):o,r=n.concat(c);return i?r:r.concat(et(c))}function bt(t,n){const e=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(e&&O(e)){let o=n;do{if(o&&t===o)return!0;o=o.parentNode||o.host}while(o)}return!1}function vt(t,n){let e=t;for(;e&&!X(e)&&!n.includes(e)&&!(A(e)&&["absolute","fixed"].includes(y(e).position));){const o=_(e);e=O(o)?o.host:o}return e}function At(t,n){const e=R(t,!1,n==="fixed"),o=e.top+t.clientTop,i=e.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function q(t,n,e){return n==="viewport"?F(xt(t,e)):A(n)?At(n,e):F(yt(v(t)))}function Rt(t){const n=et(t),e=vt(t,n);let o=null;if(e&&w(e)){const i=M(e);N(e)?o=e:w(i)&&(o=i)}return A(o)?n.filter(i=>o&&A(i)&&bt(i,o)&&b(i)!=="body"):[]}function Tt(t){let{element:n,boundary:e,rootBoundary:o,strategy:i}=t;const c=[...e==="clippingAncestors"?Rt(n):[].concat(e),o],r=c[0],s=c.reduce((l,d)=>{const f=q(n,d,i);return l.top=L(f.top,l.top),l.right=I(f.right,l.right),l.bottom=I(f.bottom,l.bottom),l.left=L(f.left,l.left),l},q(n,r,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}const Ct={getClippingRect:Tt,convertOffsetParentRelativeRectToViewportRelativeRect:mt,isElement:A,getDimensions:U,getOffsetParent:M,getDocumentElement:v,getElementRects:t=>{let{reference:n,floating:e,strategy:o}=t;return{reference:pt(n,M(e),o),floating:{...U(e),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>y(t).direction==="rtl"},Vt=(t,n,e)=>rt(t,n,{platform:Ct,...e});export{Nt as a,Vt as c,Et as o};
